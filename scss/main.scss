@import "compass";
@import "lib";
@import "interiors";

body {
	background: $background-color;
	&.rotated #building_container {
		@include animation(perspective-transition $split-transition-duration + $skew-transition-duration forwards)
	}
}

#building_container {
  -webkit-perspective: 1000px;
  perspective: 1000px;
  perspective-origin: center 20%;
}

@include keyframe(perspective-transition) {
	50% {
		-webkit-perspective: 1000px;
		perspective: 1000px;
		perspective-origin: center 20%;
	}
	100% {
		-webkit-perspective: 5000px;
		perspective: 5000px;
		perspective-origin: center 40%;
	}
}

* {
  @include box-sizing(border-box); 
  border-style: solid;
  border-width: 0;
}

.building {
	margin-left: auto;
	margin-right: auto;
	@include transform-style(preserve-3d);
	margin-top: 100px;
	width: 500px;
	height: 500px;
	pointer-events: none;
	.room {
		@include square(100%);
	}
	svg {
		overflow: visible;
		@include square(100%);
		position: absolute;
	}
}

@include sizing($floor-depth, $floor-width);

.facade {
	@include transform(rotateX(-90deg));
}

#top_floor {
	@include floor-sizing(325px, $floor-width, 'top-floor', $post-transform-x: -30px, $post-transform-y: -30px, $pre-transform-y: 40%, $facade-width: 86px);
	@include floor-styling($first-floor-color, 'top-floor');
	.facade {
		-webkit-transform-origin: center 254%;
		transform-origin: center 254%;
	}
	svg {
		> g {
			@include transform(scale(0.288) translateY(1109px) translateX(516px));
		}
	}
}

#second_floor {
	margin-top: -8.6%;
	@include floor-sizing(325px, $floor-width, 'second-floor', $post-transform-x: -30px, $post-transform-y: 75px, $pre-transform-z: 39px, $pre-transform-y: 40%, $facade-width: 61px);
	@include floor-styling($second-floor-color, 'second-floor');
	.facade {
		-webkit-transform-origin: center 353%;
		transform-origin: center 353%;
	}
	svg {
		> g {
			@include transform(scale(0.29) translateY(888px) translateX(513px));
		}
	}
}

#third_floor {
	margin-top: -10.5%;
	@include floor-sizing(285px, $floor-width, 'third-floor', $post-transform-y: -60px, $post-transform-x: 190px, $pre-transform-y: 59%, $pre-transform-x: -7%, $pre-transform-z: 78px, $facade-width: 55px);
	@include floor-styling($third-floor-color, 'third-floor');
	.facade {
		-webkit-transform-origin: center 389%;
		transform-origin: center 389%;
	}
	svg {
		> g {
			@include transform(scale(0.29) translateY(704px) translateX(582px));
		}
	}
}

#fourth_floor {
	margin-top: -24%;
	@include floor-sizing($width: 800px, $height: 220px, $floor-name: 'fourth-floor', $post-transform-x: -275px, $post-transform-y: 720px, $pre-transform-y: -63%, $pre-transform-z: 177px, $pre-transform-x: 30%, $facade-width: 101px);
	@include floor-styling($fourth-floor-color, 'fourth-floor');
	.facade {
		-webkit-transform-origin: center 267%;
		transform-origin: center 267%;
	}
	svg {
		> g {
			@include transform(scale(0.29) translateY(759px) translateX(-108px));
		}
	}
}

.stairs {
	@include transform(rotateZ(-90deg));
	.floor {
		@include transform(translateZ(-$floor-depth * 2));
		border-width: 1px;
		@include square(100%);
		left: 0;
		top: 0;
	}
	.horizontal {
		border-top-width: 1px;
	}
	.step_large {
		left: 24%;
		.horizontal, .vertical {
			border-left-width: none;
		}
		&.step_1 {
			top: 5%;
			@include step-sizing(-$floor-depth, $floor-depth, 20px, 64%);
		}				
		&.step_2 {
			top: 30%;
			@include step-sizing(-($floor-depth + 20px), $floor-depth - 20px, 20px, 64%);
		}
	}
	.step_small {
		.vertical {
			border-top-width: 0px;
		}
		&.step_1 {
			top: 5%;
			@include step-sizing(-$floor-depth, $floor-depth, 15px, 34%);
		}
		&.step_2 {
			top: 20%;
			@include step-sizing(-($floor-depth + 15px), $floor-depth - 15px, 15px, 34%);
		}
		&.step_3 {
			top: 35%;
			@include step-sizing(-($floor-depth + 30px), $floor-depth - 30px, 15px, 34%);
		}
		&.step_4 {
			top: 50%;
			@include step-sizing(-($floor-depth + 45px), $floor-depth - 45px, 15px, 34%);
		}
	}
}