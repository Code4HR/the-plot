@import "compass";
@import "lib";

$floor-width: 310px;
$floor-height: 105px;
$floor-depth: 65px;
$top-floor-color: #733E2D;
$background-color: #212121;

body {
  background: $background-color;
}

* {
  box-sizing: border-box;  
}

.container {
  width: $floor-width;
  height: $floor-height;
  margin-left: auto;
  margin-right: auto;
  -webkit-perspective: 2000px;
  .contents {
    position: relative;
    width: 100%;
    height: 100%;
    transform: rotateX(90deg);
  }
  * {
    position: absolute;
    transition: all 1s;
    transform-style: preserve-3d;
  }
  .facade {
    width: 100%;
    height: 120px;
    background: rgba(white, 0.5);
    border-style: solid;
    border-width: 1px;
    border-color: rgba(white, 0.5);
    transform-origin: center 87px 22px !important;
    transition-duration: 500ms;
    background-image: -webkit-repeating-radial-gradient(center center, $background-color, $background-color 3px, transparent 3px, transparent 100%);
  background-image: repeating-radial-gradient(center center, $background-color, $background-color 3px, transparent 3px, transparent 100%);
  -webkit-background-size: 6px 6px;
  background-size: 6px 6px;
    .window {
      transition-duration: 300ms !important;
      width: 42px;
      height: 62px;
      top: 10px;
      background: $background-color;
      border: solid 1px rgba(white, 0.5);
      transform: none !important;
      &.left {
        left: 58px;
      }
      &.center {
        left: 50%;
        margin-left: -21px;
      }
      &.right {
        right: 60px;
      }
    }
  }
  .couch {
    transform: translateZ(-$floor-depth);
      height: 14px;
    .back, .floor, [class*="step"] {
      border: solid 1px $top-floor-color;
      width: 100%;
    }
    .back {
      height: 25px;      
      bottom: 100%;
    }
    .floor {
      height: 100%;
    }
    [class*="vertical"], .back {
      transform: rotateX(-90deg);
      transform-origin: center bottom;
    }
      .step_1_vertical {
        height: 8px;
        bottom: 0;
        }
      .step_2_vertical {
        height: 18px;
        bottom: 0;
        transform-origin: center bottom 8px;
        border-bottom: none;
        }
      [class*="horizontal"] {
        border-top: none;
        border-bottom: none;
        
        }
      .step_1_horizontal {
        height: 65%;
        bottom: 0;
        transform: translateZ(7px);
        }
      .step_2_horizontal {
        height: 35%;
        top: 0;
        transform: translateZ(25px);
        }
      
  }
  [class*="chair_right_facing"] [class*="chair_back"] {
        border-right: none;
        right: 100%;
        left: auto;
        transform: rotateY(90deg);
        transform-origin: right center;
    }
  [class*="chair_right_facing"], [class*="chair_left_facing"] {
    width: 8px;
    height: 8px;
    transform: translateZ(-10px) !important;
  }
  [class*="chair_seat"] {
    width: 100%;
    height: 100%;
    border: solid 1px $top-floor-color;
  }
  [class*="chair_back"] {
    height: 100%;
    width: 14px;
    border: solid 1px $top-floor-color;
    border-left: none;
    left: 100%;
    transform: rotateY(-90deg);
    transform-origin: left center;
  }
  [class*="chair_leg"] {
    width: $floor-depth - 45px;
    transform: rotateY(-90deg);
    transform-origin: right center;
    height: 2px;
    background: $top-floor-color;
  }
  [class*="chair_leg_tl"], [class*="chair_leg_bl"] {
    right: 100%;
  }
  [class*="chair_leg_tl"] {
    top: 0;
  }
  [class*="chair_leg_tr"] {
    right: 0;
  }
  [class*="chair_leg_bl"] {
    bottom: 0;
  }
  [class*="chair_leg_br"] {
    bottom: 0;
    right: 0;
  }
  [class*="table_surface"] {
    border: solid 1px $top-floor-color;
    width: 100%;
    height: 100%;
  }
  [class*="table_leg"] {
    width: $floor-depth - 35px;
    transform: rotateY(-90deg);
    transform-origin: right center;
    height: 2px;
    background: $top-floor-color;
  }
  [class*="table_leg_tl"], [class*="table_leg_bl"] {
    right: 100%;
  }
  [class*="table_leg_tl"] {
    top: 0;
  }
  [class*="table_leg_tr"] {
    right: 0;
  }
  [class*="table_leg_bl"] {
    bottom: 0;
  }
  [class*="table_leg_br"] {
    bottom: 0;
    right: 0;
  }

  [class*='side'], [class*='wall'] {
    border: solid 2px $top-floor-color;
    background: rgba($top-floor-color, 0.15);
  }
  [class*='top'], .facade {
    transform: rotateX(90deg);
    transform-origin: center bottom;
  }
  [class*='right'] {
    transform: rotateY(90deg);
    transform-origin: left center;
  }
  [class*='left'] {
    transform: rotateY(-90deg);
    transform-origin: right center;
  }
  [class*='bottom'] {
    transform: rotateX(-90deg);
    transform-origin: center top;
  }
  .conference_room {
    left: 0;
    bottom: 0;
    width: 90px;
    height: 100%;
    .conference_room_right_wall {
      width: $floor-depth;
      height: 100%;
      left: 100%;
      bottom: 0;
    }
    
    .conference_room_chair_left_facing, .conference_room_chair_right_facing {
      left: calc(100% + 4px);
      &[class*="conference_room_chair_1"] {
        top: 8px;
      }
      &[class*="conference_room_chair_2"] {        
        top: 25px;
      }
      &[class*="conference_room_chair_3"] {        
        top: 42px;
      }
      &[class*="conference_room_chair_4"] {        
        top: 59px;
      }
    }
    .conference_room_chair_right_facing {
      right: calc(100% + 3px);
      left: auto;
      &[class*="conference_room_chair_5"] {
        top: 8px;
      }
      &[class*="conference_room_chair_6"] {        
        top: 25px;
      }
      &[class*="conference_room_chair_7"] {        
        top: 42px;
      }
      &[class*="conference_room_chair_8"] {        
        top: 59px;
      }
    }
    .conference_room_table {
      width: 30px;
      height: 80px;
      left: 22px;
      bottom: 2px;
      transform: translateZ(-35px);
      
    } 
  }
  .storage_room_1 {
    left: 140px;
    top: 0;
    width: 55px;
    height: 30px;
  }
  .storage_room_2 {
    left: 140px;
    top: 30px;
    width: 55px;
    height: 25px;
  }
  .storage_room_3 {
    right: 60px;
    top: 0;
    width: 30px;
    height: 30px;
  }
  .storage_room_4 {
    right: 20px;
    top: 0;
    width: 40px;
    height: 30px;
  }
  .work_room_1 {
    right: 0;
    bottom: 0;
    width: 40px;
    height: 45px;
    .table {
      width: 12px;
      height: 30px;
      left: 12px;
      bottom: 0;
      transform: translateZ(-35px);
    }
    .chair_left_facing {
      left: 100%;
    }
    .chair_right_facing {
      right: 100%;
    }
    .chair_1, .chair_3 {
      top: 2px;
    }
    .chair_2, .chair_4 {
      top: 18px;
    }
  }
  .work_room_2 {
    right: 40px;
    bottom: 0;
    width: 60px;
    height: 45px;
    .couch_1, .couch_2 {
      width: 16px;
    }
    .couch_1 {
      transform: translateZ(-$floor-depth) rotateZ(90deg);
      right: -2px;
      top: 5px;
    }
    .couch_2 {
      transform: translateZ(-$floor-depth) rotateZ(-90deg);
    }
  }
  .work_room_3 {
    left: 90px;
    top: 0;
    width: 50px;
    height: 75px;
    .couch_1 {
      width: 32px;
      transform: translateZ(-$floor-depth) rotateZ(90deg);
      right: -8px;
      top: 12px;
    }
    .couch_2 {
      width: 23px;
    }
  }
  .work_room_3_bottom_wall, .storage_room_1_bottom_wall, .storage_room_2_bottom_wall, .storage_room_3_bottom_wall, .storage_room_4_bottom_wall {
    height: $floor-depth;
    width: 100%;
    left: 0;
    top: 100%;
    border-right-width: 1px;
    border-left-width: 1px;
  }
  .work_room_3_right_wall, .storage_room_1_right_wall, .storage_room_2_right_wall, .storage_room_3_right_wall, .storage_room_4_right_wall {
    width: $floor-depth;
    height: 100%;
    left: 100%;
    top: 0;
    border-bottom: none;
  }
  .work_room_1_top_wall, .work_room_2_top_wall {
    height: $floor-depth;
    width: 100%;
    right: 0;
    bottom: 100%;
  }
  .work_room_1_left_wall, .work_room_2_left_wall, .storage_room_3_left_wall {
    width: $floor-depth;
    height: 100%;
    right: 100%;
    bottom: 0;
    border-top: none;
  }
  .work_room_1_top_wall {
    border-left: none;
    border-right-width: 1px;
  }
  .top-side, .bottom-side {
    left: 0;
    border-left: none;
    border-right: none;
    width: 100%;
    height: $floor-depth;
  }
  .right-side, .left-side {
    width: $floor-depth;
    height: 100%;
  }
  .top-side {
    bottom: 100%;
  }
  .right-side {
    top: 0;
    left: 100%;
  }
  .bottom-side {
    top: 100%;
  }
  .left-side {
    right: 100%;
  }
}

#top_floor {
  margin-top: 200px;
  .rotated & {
    .contents {
      -webkit-animation: top-floor 1s forwards;
      animation: top-floor 1s forwards;
    }
    .facade {
      -webkit-animation: top-floor-facade 1s forwards;
      animation: top-floor-facade 1s forwards;
    }
    .window {
      border-color: $top-floor-color;
    }
  }
}

@-webkit-keyframes top-floor {
  50% {
    transform: translateY(-30px) rotateX(90deg) translateX(-30px);
  }
  100% {
    transform: translateY(-30px) rotateX(20deg) rotateZ(-30deg);
  }
}

@keyframes top-floor {
  50% {
    transform: translateY(-30px) translateX(-30px) rotateX(90deg);
  }
  100% {
    transform: rotateX(20deg) rotateZ(-30deg) translateY(-30px) translateX(-30px);
  }
}

@-webkit-keyframes top-floor-facade {
  30% {
    border-color: $top-floor-color;
    background-color: $top-floor-color;
  }
  50% {
    border-color: $top-floor-color;
    background-color: $top-floor-color;
    opacity: 1;
  }
  100% {
    border-color: $top-floor-color;
    background-color: $top-floor-color;
    opacity: 0;
  }
}

@keyframes top-floor-facade {
  30% {
    border-color: $top-floor-color;
    background-color: $top-floor-color;
  }
  50% {
    border-color: $top-floor-color;
    background-color: $top-floor-color;
    opacity: 1;
  }
  100% {
    border-color: $top-floor-color;
    background-color: $top-floor-color;
    opacity: 0;
  }
}

#second_floor {
  margin-top: 20px;
  .rotated & {
    .contents {
      -webkit-animation: second-floor 1s forwards;
      animation: second-floor 1s forwards;
    }
    .facade {
      -webkit-animation: second-floor-facade 1s forwards;
      animation: second-floor-facade 1s forwards;
    }
    .window {
      border-color: #3C685C;
    }
  }
  * {
    border-color: #3C685C;
  }
  [class*='side'], [class*='wall'] {
    background: rgba(#3C685C, 0.15);
  }
  [class*="leg"] {
    background: #3C685C !important;
  }
    .window, .facade {
      border-color: rgba(white, 0.5);
    }
}

@-webkit-keyframes second-floor {
  50% {
    transform: translateY(30px) translateX(30px) rotateX(90deg);
  }
  100% {
    transform: rotateX(20deg) rotateZ(-30deg) translateY(30px) translateX(30px);
  }
}

@keyframes second-floor {
  50% {
    transform: translateY(30px) translateX(30px) rotateX(90deg);
  }
  100% {
    transform: rotateX(20deg) rotateZ(-30deg) translateY(30px) translateX(30px);
  }
}

@-webkit-keyframes second-floor-facade {
  30% {
    border-color: #3C685C;
    background-color: #3C685C;
  }
  50% {
    border-color: #3C685C;
    background-color: #3C685C;
    opacity: 1;
  }
  100% {
    border-color: #3C685C;
    background-color: #3C685C;
    opacity: 0;
  }
}

@keyframes second-floor-facade {
  30% {
    border-color: #3C685C;
    background-color: #3C685C;
  }
  50% {
    border-color: #3C685C;
    background-color: #3C685C;
    opacity: 1;
  }
  100% {
    border-color: #3C685C;
    background-color: #3C685C;
    opacity: 0;
  }
}

